!function($){"use strict";function getValue($el){return $el.is('[type="checkbox"]')?$el.prop("checked"):$el.is('[type="radio"]')?!!$('[name="'+$el.attr("name")+'"]:checked').length:$.trim($el.val())}var Validator=function(element,options){for(var custom in this.options=options,this.$element=$(element),this.$inputs=this.$element.find(Validator.INPUT_SELECTOR),this.$btn=$('button[type="submit"], input[type="submit"]').filter('[form="'+this.$element.attr("id")+'"]').add(this.$element.find('input[type="submit"], button[type="submit"]')),options.errors=$.extend({},Validator.DEFAULTS.errors,options.errors),options.custom)if(!options.errors[custom])throw new Error("Missing default error message for custom validator: "+custom);$.extend(Validator.VALIDATORS,options.custom),this.$element.attr("novalidate",!0),this.toggleSubmit(),this.$element.on("input.bs.validator change.bs.validator focusout.bs.validator",Validator.INPUT_SELECTOR,$.proxy(this.onInput,this)),this.$element.on("submit.bs.validator",$.proxy(this.onSubmit,this)),this.$element.find("[data-match]").each((function(){var $this=$(this),target=$this.data("match");$(target).on("input.bs.validator",(function(e){getValue($this)&&$this.trigger("input.bs.validator")}))}))};function Plugin(option){return this.each((function(){var $this=$(this),options=$.extend({},Validator.DEFAULTS,$this.data(),"object"==typeof option&&option),data=$this.data("bs.validator");(data||"destroy"!=option)&&(data||$this.data("bs.validator",data=new Validator(this,options)),"string"==typeof option&&data[option]())}))}Validator.INPUT_SELECTOR=':input:not([type="submit"], button):enabled:visible',Validator.FOCUS_OFFSET=20,Validator.DEFAULTS={delay:500,html:!1,disable:!0,focus:!0,custom:{},errors:{match:"Dato no vÃ¡lido",minlength:"Dato Incompleto"},feedback:{success:"glyphicon-ok",error:"glyphicon-remove"}},Validator.VALIDATORS={native:function($el){var el=$el[0];return!el.checkValidity||el.checkValidity()},match:function($el){var target=$el.data("match");return!$el.val()||$el.val()===$(target).val()},minlength:function($el){var minlength=$el.data("minlength");return!$el.val()||$el.val().length>=minlength}},Validator.prototype.onInput=function(e){var self=this,$el=$(e.target),deferErrors="focusout"!==e.type;this.validateInput($el,deferErrors).done((function(){self.toggleSubmit()}))},Validator.prototype.validateInput=function($el,deferErrors){var value=getValue($el),prevValue=$el.data("bs.validator.previous"),prevErrors=$el.data("bs.validator.errors"),errors;if(prevValue===value)return $.Deferred().resolve();$el.data("bs.validator.previous",value),$el.is('[type="radio"]')&&($el=this.$element.find('input[name="'+$el.attr("name")+'"]'));var e=$.Event("validate.bs.validator",{relatedTarget:$el[0]});if(this.$element.trigger(e),!e.isDefaultPrevented()){var self=this;return this.runValidators($el).done((function(errors){$el.data("bs.validator.errors",errors),errors.length?deferErrors?self.defer($el,self.showErrors):self.showErrors($el):self.clearErrors($el),prevErrors&&errors.toString()===prevErrors.toString()||(e=errors.length?$.Event("invalid.bs.validator",{relatedTarget:$el[0],detail:errors}):$.Event("valid.bs.validator",{relatedTarget:$el[0],detail:prevErrors}),self.$element.trigger(e)),self.toggleSubmit(),self.$element.trigger($.Event("validated.bs.validator",{relatedTarget:$el[0]}))}))}},Validator.prototype.runValidators=function($el){var errors=[],deferred=$.Deferred(),options=this.options;function getErrorMessage(key){return $el.data(key+"-error")||$el.data("error")||"native"==key&&$el[0].validationMessage||options.errors[key]}return $el.data("bs.validator.deferred")&&$el.data("bs.validator.deferred").reject(),$el.data("bs.validator.deferred",deferred),$.each(Validator.VALIDATORS,$.proxy((function(key,validator){if((getValue($el)||$el.attr("required"))&&($el.data(key)||"native"==key)&&!validator.call(this,$el)){var error=getErrorMessage(key);!~errors.indexOf(error)&&errors.push(error)}}),this)),!errors.length&&getValue($el)&&$el.data("remote")?this.defer($el,(function(){var data={};data[$el.attr("name")]=getValue($el),$.get($el.data("remote"),data).fail((function(jqXHR,textStatus,error){errors.push(getErrorMessage("remote")||error)})).always((function(){deferred.resolve(errors)}))})):deferred.resolve(errors),deferred.promise()},Validator.prototype.validate=function(){var self=this;return $.when(this.$inputs.map((function(el){return self.validateInput($(this),!1)}))).then((function(){self.toggleSubmit(),self.focusError()})),this},Validator.prototype.focusError=function(){if(this.options.focus){var $input=$(".has-error:first :input");0!==$input.length&&($(document.body).animate({scrollTop:$input.offset().top-Validator.FOCUS_OFFSET},250),$input.focus())}},Validator.prototype.showErrors=function($el){var method=this.options.html?"html":"text",errors=$el.data("bs.validator.errors"),$group=$el.closest(".form-group"),$block=$group.find(".help-block.with-errors"),$feedback=$group.find(".form-control-feedback");errors.length&&(errors=$("<ul/>").addClass("list-unstyled").append($.map(errors,(function(error){return $("<li/>")[method](error)}))),void 0===$block.data("bs.validator.originalContent")&&$block.data("bs.validator.originalContent",$block.html()),$block.empty().append(errors),$group.addClass("has-error has-danger"),$group.hasClass("has-feedback")&&$feedback.removeClass(this.options.feedback.success)&&$feedback.addClass(this.options.feedback.error)&&$group.removeClass("has-success"))},Validator.prototype.clearErrors=function($el){var $group=$el.closest(".form-group"),$block=$group.find(".help-block.with-errors"),$feedback=$group.find(".form-control-feedback");$block.html($block.data("bs.validator.originalContent")),$group.removeClass("has-error has-danger"),$group.hasClass("has-feedback")&&$feedback.removeClass(this.options.feedback.error)&&getValue($el)&&$feedback.addClass(this.options.feedback.success)&&$group.addClass("has-success")},Validator.prototype.hasErrors=function(){function fieldErrors(){return!!($(this).data("bs.validator.errors")||[]).length}return!!this.$inputs.filter(fieldErrors).length},Validator.prototype.isIncomplete=function(){function fieldIncomplete(){return!getValue($(this))}return!!this.$inputs.filter("[required]").filter(fieldIncomplete).length},Validator.prototype.onSubmit=function(e){this.validate(),(this.isIncomplete()||this.hasErrors())&&e.preventDefault()},Validator.prototype.toggleSubmit=function(){this.options.disable&&this.$btn.toggleClass("disabled",this.isIncomplete()||this.hasErrors())},Validator.prototype.defer=function($el,callback){if(callback=$.proxy(callback,this,$el),!this.options.delay)return callback();window.clearTimeout($el.data("bs.validator.timeout")),$el.data("bs.validator.timeout",window.setTimeout(callback,this.options.delay))},Validator.prototype.destroy=function(){return this.$element.removeAttr("novalidate").removeData("bs.validator").off(".bs.validator").find(".form-control-feedback").removeClass([this.options.feedback.error,this.options.feedback.success].join(" ")),this.$inputs.off(".bs.validator").removeData(["bs.validator.errors","bs.validator.deferred","bs.validator.previous"]).each((function(){var $this=$(this),timeout=$this.data("bs.validator.timeout");window.clearTimeout(timeout)&&$this.removeData("bs.validator.timeout")})),this.$element.find(".help-block.with-errors").each((function(){var $this=$(this),originalContent=$this.data("bs.validator.originalContent");$this.removeData("bs.validator.originalContent").html(originalContent)})),this.$element.find('input[type="submit"], button[type="submit"]').removeClass("disabled"),this.$element.find(".has-error, .has-danger").removeClass("has-error has-danger"),this};var old=$.fn.validator;$.fn.validator=Plugin,$.fn.validator.Constructor=Validator,$.fn.validator.noConflict=function(){return $.fn.validator=old,this},$(window).on("load",(function(){$('form[data-toggle="validator"]').each((function(){var $form=$(this);Plugin.call($form,$form.data())}))}))}(jQuery);